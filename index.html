<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Garbage Drop</title>

<style>
body{
    margin:0;
    overflow:hidden;
    background:#07080b;
    font-family:Arial, sans-serif;
    color:white;
}

#bag{
    position:absolute;
    bottom:20px;
    width:220px;
    cursor:pointer;
    transition:transform 0.3s ease;
}

#bag:hover{
    transform:scale(1.05);
}

#menuPanel{
    position:fixed;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    width:360px;
    background:#1a1a1a;
    border:2px solid #444;
    border-radius:12px;
    padding:20px;
    display:none;
    box-shadow:0 0 30px rgba(0,0,0,0.8);
}

#menuPanel h2{
    margin-top:0;
    text-align:center;
}

.item{
    display:flex;
    align-items:center;
    margin:12px 0;
    background:#222;
    padding:8px;
    border-radius:8px;
}

.item img{
    width:50px;
    height:50px;
    object-fit:contain;
    margin-right:12px;
}

.item span{
    font-size:16px;
}

.stage{
    position:fixed;
    inset:0;
    background:
        radial-gradient(circle at 1px 1px, rgba(255,255,255,.10) 1px, transparent 1px) 0 0 / 22px 22px,
        radial-gradient(1200px 700px at 20% 30%, rgba(124,92,255,.18), transparent 60%),
        radial-gradient(900px 500px at 80% 70%, rgba(34,211,238,.14), transparent 60%),
        linear-gradient(180deg, #07080b, #060710);
    filter: saturate(1.05);
    z-index:-2;
}

.glow{
    position:absolute;
    inset:-20%;
    background:
        radial-gradient(900px 600px at var(--gx,30%) var(--gy,30%), rgba(124,92,255,.22), transparent 55%),
        radial-gradient(800px 520px at var(--hx,70%) var(--hy,70%), rgba(34,211,238,.16), transparent 60%),
        radial-gradient(700px 500px at 50% 20%, rgba(255,61,127,.10), transparent 65%);
    animation: drift 10s linear infinite;
    pointer-events:none;
    mix-blend-mode: screen;
    z-index:-1;
}

@keyframes drift{
    0%   { transform: translate3d(-1.5%, -1.0%, 0) rotate(0deg); }
    50%  { transform: translate3d( 1.5%,  1.0%, 0) rotate(2deg); }
    100% { transform: translate3d(-1.5%, -1.0%, 0) rotate(0deg); }
}
/* PHONE STYLE LAYER */
.phoneLayer{
    position:fixed;
    inset:0;
    background:#e9e9e9;
    z-index:50;
}

.phoneLayer svg{
    position:absolute;
    width:100%;
    height:100%;
}

.cross{
    position:absolute;
    top:50%;
    left:50%;
    width:40px;
    height:40px;
    transform:translate(-50%,-50%) rotate(45deg);
    cursor:pointer;
    z-index:51;
}

.cross::before,
.cross::after{
    content:"";
    position:absolute;
    background:red;
    width:4px;
    height:40px;
    left:50%;
    top:0;
    transform:translateX(-50%);
}

.cross::after{
    transform:translateX(-50%) rotate(90deg);
}

.phoneLayer path{
    fill:none;
    stroke:black;
    stroke-width:3;
    stroke-dasharray:10 12;
    stroke-linecap:round;
}

/* ===== BOTTOM MENU ===== */

.bottom-bar{
    position:fixed;
    bottom:0;
    left:0;
    width:100%;
    background:#ececec;
    padding:14px 0;
    display:flex;
    justify-content:center;
    box-shadow:0 -5px 20px rgba(0,0,0,0.15);
    z-index:2000;
}

.menu{
    display:flex;
    gap:16px;
}

.btn{
    position:relative;
    width:56px;
    height:56px;
    border:none;
    border-radius:10px;
    background:#e2e2e2;
    cursor:pointer;
    overflow:hidden;
    transition:width 0.45s cubic-bezier(.22,1,.36,1);
    color:#4b5563;
}

.btn::before{
    content:"";
    position:absolute;
    inset:0;
    background:#5b8fd1;
    border-radius:10px;

    transform:scaleX(0);
    transform-origin:center;
    opacity:0;

    transition:
        transform 0.45s cubic-bezier(.22,1,.36,1),
        opacity 0.35s ease;

    z-index:1;
}

.btn-inner{
    position:relative;
    height:100%;
    display:flex;
    align-items:center;
    padding-left:16px;
    gap:10px;
    z-index:2;
}

.btn span{
    opacity:0;
    transform:translateX(-6px);
    transition:opacity .3s ease, transform .3s ease;
}

.btn.active{
    width:170px;
    color:white;
}

.btn.active::before{
    transform:scaleX(1);
    opacity:1;
}

.btn.active span{
    opacity:1;
    transform:translateX(0);
}

.btn svg{
    width:20px;
    height:20px;
    min-width:20px;
    min-height:20px;
    flex-shrink:0;
    display:block;
}
    
</style>
</head>
<body>

   <!-- BOTTOM BAR -->
<div class="bottom-bar" id="bottomBar" style="display:none;">
    <div class="menu">

        <a href="index.html" class="btn active">
            <div class="btn-inner">
                <svg viewBox="0 0 24 24">
                    <path d="M12 3l9 8h-3v9h-5v-6H11v6H6v-9H3z"/>
                </svg>
                <span>Home</span>
            </div>
        </a>

        <a href="profile.html" class="btn">
            <div class="btn-inner">
                <svg viewBox="0 0 24 24">
                    <path d="M12 12c2.7 0 5-2.3 5-5S14.7 2 12 2 7 4.3 7 7s2.3 5 5 5zm0 2c-3.3 0-10 1.7-10 5v3h20v-3c0-3.3-6.7-5-10-5z"/>
                </svg>
                <span>Profile</span>
            </div>
        </a>

        <a href="apps.html" class="btn">
            <div class="btn-inner">
                <svg viewBox="0 0 24 24">
                    <path d="M4 4h4v4H4V4zm6 0h4v4h-4V4zm6 0h4v4h-4V4zM4 10h4v4H4v-4zm6 0h4v4h-4v-4zm6 0h4v4h-4v-4zM4 16h4v4H4v-4zm6 0h4v4h-4v-4zm6 0h4v4h-4v-4z"/>
                </svg>
                <span>Apps</span>
            </div>
        </a>

    </div>
</div>

<div class="phoneLayer" id="phoneLayer">
    <svg id="svg">
        <path id="dynamicPath"/>
    </svg>
    <div class="cross" id="cross"></div>
</div>
<div class="stage">
    <div class="glow" id="glow"></div>
</div>

<img id="bag" src="bag.png">

<div id="menuPanel">
    <h2>Содержимое пакета</h2>
    <div id="itemsList"></div>
</div>

<script>

const bag = document.getElementById("bag");
const menuPanel = document.getElementById("menuPanel");
const itemsList = document.getElementById("itemsList");

let state = "bag";

const trashItems = [
    { name:"Зубная щётка", file:"trash/zub.png" },
    { name:"Шапочка для ванны", file:"trash/Vanna.png" },
    { name:"Локон волос", file:"trash/Lokon.png" },
    { name:"Жвачка", file:"trash/chavka.png" },
    { name:"Окурок", file:"trash/okyrok.png" },
    { name:"Чайный пакетик", file:"trash/Tea-paket.png" },
    { name:"Стрела купидона", file:"trash/Strela.png" },
    { name:"Деньги", file:"trash/Many.png" },
    { name:"Носок", file:"trash/Nosok.png" },
    { name:"Китайские палочки", file:"trash/Palochki.png" },
    { name:"Пыль", file:"trash/Plinka.png" },
    { name:"Палочка от чупа-чупса", file:"trash/chupa.png" },
    { name:"Шелуха от семечек", file:"trash/Semena.png" },
     { name:"Кожура апельсина", file:"trash/Apelsin.png" },
    { name:"Презерватив", file:"trash/Spermak.png" }
];

function randomSide(){
    bag.style.left = "";
    bag.style.right = "";

    if(Math.random() < 0.5){
        bag.style.left = "40px";
    } else {
        bag.style.right = "40px";
    }
}

function spawnBag(){
    state = "bag";
    bag.src = "bag.png";
    bag.style.display = "block";
    menuPanel.style.display = "none";
    randomSide();

    const nextTime = 10000 + Math.random()*5000;
    setTimeout(spawnBag, nextTime);
}

function getRandomItems(){
    const shuffled = [...trashItems]
        .sort(() => Math.random() - 0.5);

    const count = Math.floor(Math.random()*3) + 3;
    return shuffled.slice(0, count);
}

function showRandomItems(){
    itemsList.innerHTML = "";

    const selected = getRandomItems();

    selected.forEach(itemData => {
        const item = document.createElement("div");
        item.className = "item";

        item.innerHTML = `
            <img src="${itemData.file}" alt="${itemData.name}">
            <span>${itemData.name}</span>
        `;

        itemsList.appendChild(item);
    });

    menuPanel.style.display = "block";
}

bag.addEventListener("click", () => {

    if(state === "bag"){
        bag.src = "trash.png";
        state = "trash";
    }
    else if(state === "trash"){
        showRandomItems();
        bag.style.display = "none";
        state = "opened";
    }

});

spawnBag();

const glow = document.getElementById("glow");

let t0 = performance.now();

function anim(){
    const t = (performance.now() - t0) * 0.0003;

    const gx = 30 + Math.sin(t*1.2) * 18;
    const gy = 30 + Math.cos(t*1.1) * 14;

    const hx = 70 + Math.cos(t*0.9) * 16;
    const hy = 70 + Math.sin(t*1.0) * 12;

    glow.style.setProperty("--gx", gx + "%");
    glow.style.setProperty("--gy", gy + "%");
    glow.style.setProperty("--hx", hx + "%");
    glow.style.setProperty("--hy", hy + "%");

    requestAnimationFrame(anim);
}

anim();

/* =========================
   PHONE STYLE 2 LOGIC
========================= */

const phoneLayer = document.getElementById("phoneLayer");
const svg = document.getElementById("svg");
const pathElement = document.getElementById("dynamicPath");
const cross = document.getElementById("cross");

let intervalId;

function updateViewBox() {
    const w = window.innerWidth;
    const h = window.innerHeight;
    svg.setAttribute("viewBox", `0 0 ${w} ${h}`);
}

function getCrossCenter() {
    const rect = cross.getBoundingClientRect();
    return {
        x: rect.left + rect.width / 2,
        y: rect.top + rect.height / 2
    };
}

function getRandomEdgePoint(w, h) {
    const edge = Math.floor(Math.random() * 4);
    switch(edge) {
        case 0: return { x: Math.random() * w, y: 0 };
        case 1: return { x: w, y: Math.random() * h };
        case 2: return { x: Math.random() * w, y: h };
        case 3: return { x: 0, y: Math.random() * h };
    }
}

function catmullRom2bezier(points) {
    let d = `M ${points[0].x} ${points[0].y}`;
    for (let i = 0; i < points.length - 1; i++) {
        const p0 = points[i - 1] || points[i];
        const p1 = points[i];
        const p2 = points[i + 1];
        const p3 = points[i + 2] || p2;

        const cp1x = p1.x + (p2.x - p0.x) / 6;
        const cp1y = p1.y + (p2.y - p0.y) / 6;
        const cp2x = p2.x - (p3.x - p1.x) / 6;
        const cp2y = p2.y - (p3.y - p1.y) / 6;

        d += ` C ${cp1x} ${cp1y}, ${cp2x} ${cp2y}, ${p2.x} ${p2.y}`;
    }
    return d;
}

function generatePath() {
    const w = window.innerWidth;
    const h = window.innerHeight;

    const start = getCrossCenter();
    const end = getRandomEdgePoint(w, h);

    const points = [start];

    const segments = 4 + Math.floor(Math.random() * 3);

    for (let i = 1; i < segments; i++) {
        points.push({
            x: Math.random() * w,
            y: Math.random() * h
        });
    }

    points.push(end);

    const pathData = catmullRom2bezier(points);
    pathElement.setAttribute("d", pathData);
}

function startPath() {
    generatePath();
    intervalId = setInterval(generatePath, 750);
}

updateViewBox();
startPath();

window.addEventListener("resize", () => {
    updateViewBox();
    generatePath();
});

/* =========================
   CROSS CLICK → START BAKI
========================= */

const bottomBar = document.getElementById("bottomBar");

cross.addEventListener("click", function() {

    clearInterval(intervalId);
    phoneLayer.style.display = "none";

    bottomBar.style.display = "flex"; // показать меню

    spawnBag();
});

    const buttons = document.querySelectorAll('.btn');

buttons.forEach(btn=>{
    btn.addEventListener('click',()=>{
        buttons.forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
    });
});
</script>

</body>
</html>
















